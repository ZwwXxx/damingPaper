# 论坛管理功能 - 快速入门指南

## 🚀 快速开始

### 第一步：执行SQL脚本

1. 打开 `daming-admin/sql/2025-11-24/1-论坛管理菜单权限.sql`
2. 在数据库管理工具中执行该SQL脚本
3. 确认执行成功

```bash
# 使用MySQL命令行执行（示例）
mysql -u root -p your_database < daming-admin/sql/2025-11-24/1-论坛管理菜单权限.sql
```

### 第二步：重启后端服务

```bash
cd daming-admin
# 停止现有服务
# 重新启动
./bin/run-dev.bat  # Windows
# 或
./bin/run-dev.sh   # Linux/Mac
```

### 第三步：访问论坛管理

1. 登录后台管理系统
2. 在左侧菜单找到 **"论坛管理"**
3. 点击展开，可以看到：
   - 帖子管理
   - 评论管理

## 📋 功能清单

### ✅ 已完成功能

#### 帖子管理
- ✅ 帖子列表查询（分页、筛选）
- ✅ 帖子详情查看
- ✅ 置顶/取消置顶
- ✅ 热门/取消热门
- ✅ 删除帖子（单个/批量）
- ✅ 导出帖子数据

#### 评论管理
- ✅ 评论列表查询（分页、筛选）
- ✅ 评论详情查看
- ✅ 删除评论（单个/批量）
- ✅ 导出评论数据

## 🎯 使用场景示例

### 场景1：处理违规帖子

1. 进入"帖子管理"
2. 在搜索框输入关键词
3. 找到违规帖子，点击"查看"确认
4. 点击"删除"按钮
5. 确认删除操作

### 场景2：设置精品帖子

1. 进入"帖子管理"
2. 找到优质帖子
3. 点击"置顶"按钮（让更多人看到）
4. 点击"热门"按钮（标记为热门）

### 场景3：批量清理垃圾评论

1. 进入"评论管理"
2. 使用搜索条件筛选垃圾评论
3. 勾选需要删除的评论
4. 点击顶部"删除"按钮
5. 确认批量删除

### 场景4：数据统计分析

1. 进入"帖子管理"或"评论管理"
2. 设置时间范围等筛选条件
3. 点击"导出"按钮
4. 下载Excel文件进行分析

## 🔍 常见问题

### Q1：为什么看不到"论坛管理"菜单？

**A：** 请检查以下几点：
1. 是否已执行SQL脚本？
2. 是否已重启后端服务？
3. 是否已重新登录系统？
4. 当前账号是否有相应权限？

**解决方法：**
```sql
-- 检查菜单是否添加成功
SELECT * FROM sys_menu WHERE menu_name LIKE '论坛%';

-- 检查角色权限是否分配
SELECT * FROM sys_role_menu 
WHERE menu_id IN (SELECT menu_id FROM sys_menu WHERE menu_name LIKE '论坛%');
```

### Q2：删除帖子后能恢复吗？

**A：** 可以！所有删除操作都是逻辑删除，数据仍在数据库中。

**恢复方法：**
```sql
-- 恢复单个帖子
UPDATE forum_post SET status = 1 WHERE post_id = [帖子ID];

-- 恢复某个用户的所有帖子
UPDATE forum_post SET status = 1 WHERE user_id = [用户ID] AND status = 0;
```

### Q3：如何查看某个用户的所有帖子？

**A：** 
1. 进入"帖子管理"
2. 在"发帖人"输入框输入用户名或昵称
3. 点击"搜索"

### Q4：导出数据时没有内容？

**A：** 请检查：
1. 搜索条件是否过于严格
2. 数据库中是否有数据
3. 清空搜索条件后重试

### Q5：置顶帖子没有在前台显示？

**A：** 请确认：
1. 帖子状态为"正常"（status=1）
2. 前台列表页面已刷新
3. 前台查询逻辑是否按 `is_top DESC` 排序

## 📊 数据结构说明

### 帖子状态值
```
0 - 已删除
1 - 正常
2 - 审核中
```

### 置顶状态
```
0 - 不置顶
1 - 置顶
```

### 热门状态
```
0 - 不是热门
1 - 热门
```

### 评论状态
```
0 - 已删除
1 - 正常
```

## 🎨 界面预览

### 帖子管理页面
```
┌─────────────────────────────────────────────────────────┐
│ 帖子标题: [输入框]  发帖人: [输入框]  状态: [下拉框]   │
│ 置顶: [下拉框]  热门: [下拉框]  [搜索] [重置]           │
├─────────────────────────────────────────────────────────┤
│ [删除] [导出]                                           │
├─────────────────────────────────────────────────────────┤
│ □ ID  标题     发帖人  浏览  点赞  评论  置顶  热门  状态│
│ □ 1   测试帖   张三    100   20    5    是    否    正常│
│ □ 2   问题求助 李四     50   10    2    否    是    正常│
└─────────────────────────────────────────────────────────┘
操作: [查看] [置顶] [热门] [删除]
```

### 评论管理页面
```
┌─────────────────────────────────────────────────────────┐
│ 帖子ID: [输入框]  评论人: [输入框]  内容: [输入框]     │
│ 状态: [下拉框]  [搜索] [重置]                           │
├─────────────────────────────────────────────────────────┤
│ [删除] [导出]                                           │
├─────────────────────────────────────────────────────────┤
│ □ ID  帖子ID  评论人  评论内容  回复  点赞  状态       │
│ □ 1   10     王五    很好用      无     5    正常      │
│ □ 2   10     赵六    同意楼上   @王五   3    正常      │
└─────────────────────────────────────────────────────────┘
操作: [查看] [删除]
```

## 💡 最佳实践

### 1. 定期清理
建议每周清理一次垃圾帖子和评论：
- 导出本周数据进行分析
- 标记并删除违规内容
- 保留数据备份

### 2. 内容推荐
优质内容要及时推荐：
- 将优质帖子设为"置顶"
- 将热门讨论设为"热门"
- 鼓励用户创作高质量内容

### 3. 数据监控
定期查看数据统计：
- 每日新增帖子数
- 用户活跃度
- 热门话题趋势

### 4. 权限管理
合理分配权限：
- 超级管理员：所有权限
- 内容审核员：查看、删除权限
- 数据分析员：查看、导出权限

## 📞 技术支持

如有问题，请联系技术支持团队或查看详细文档：
- 详细文档：`doc/service/2025-11-24/1-论坛管理功能说明.md`
- SQL脚本：`sql/2025-11-24/1-论坛管理菜单权限.sql`

---

**祝你使用愉快！** 🎉
