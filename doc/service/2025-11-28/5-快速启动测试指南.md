# 知识点库系统 - 快速启动测试指南

> **5分钟快速测试指南**  
> **目标**: 验证后端接口是否正常工作

---

## 🚀 第一步：启动后端项目

### 方式一：IDEA启动（推荐）

1. **打开项目**
   - 使用IDEA打开 `daming-admin` 项目
   - 等待Maven依赖下载完成

2. **找到启动类**
   - 导航到：`ruoyi-admin/src/main/java/com/ruoyi/RuoYiApplication.java`
   - 右键 → Run 'RuoYiApplication'

3. **查看启动日志**
   ```
   ____              _        
   |  _ \ _   _  ___ (_)       
   | |_) | | | |/ _ \| |       
   |  _ <| |_| | (_) | |       
   |_| \_\\__,_|\___/|_|       
   
   :: Spring Boot ::        (v2.x.x)
   
   ...
   Started RuoYiApplication in 15.234 seconds
   ```

4. **确认启动成功**
   - 看到 `Started RuoYiApplication` 表示启动成功
   - 默认端口：`8080`

### 方式二：命令行启动

```bash
cd daming-admin
mvn clean package -DskipTests
java -jar ruoyi-admin/target/ruoyi-admin.jar
```

---

## 🧪 第二步：测试接口

### 测试1：浏览器测试（最简单）

**打开浏览器，访问以下URL**:

```
http://localhost:8080/student/knowledge/subjects
```

**预期结果**:
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "subjectId": 1,
      "subjectName": "计算机组成原理",
      "subjectCode": "CO"
    }
  ]
}
```

✅ **如果看到类似的JSON数据，说明接口正常！**

---

### 测试2：测试所有接口

**在浏览器中依次访问**:

1. **科目列表**
   ```
   http://localhost:8080/student/knowledge/subjects
   ```

2. **章节树（科目ID=1）**
   ```
   http://localhost:8080/student/knowledge/chapters/1
   ```

3. **知识点列表（分页）**
   ```
   http://localhost:8080/student/knowledge/points?pageNum=1&pageSize=10
   ```

4. **知识点详情（ID=1）**
   ```
   http://localhost:8080/student/knowledge/point/1
   ```

5. **热门知识点**
   ```
   http://localhost:8080/student/knowledge/point/hot?limit=5
   ```

6. **最新知识点**
   ```
   http://localhost:8080/student/knowledge/point/latest?limit=5
   ```

7. **推荐知识点**
   ```
   http://localhost:8080/student/knowledge/point/recommend?limit=5
   ```

---

### 测试3：使用Postman（可选）

1. **打开Postman**
2. **新建请求**
   - Method: `GET`
   - URL: `http://localhost:8080/student/knowledge/subjects`
3. **点击Send**
4. **查看Response**

---

## ✅ 验证成功的标志

### 科目列表接口
- ✅ 返回5个科目
- ✅ 包含：计算机组成原理、数据结构、操作系统、计算机网络、数据库原理

### 章节树接口
- ✅ 返回树形结构
- ✅ 一级章节包含 `children` 数组
- ✅ 计组包含12个章节

### 知识点列表接口
- ✅ 返回分页数据（`total` 和 `rows`）
- ✅ 至少有1条数据（Cache映射方式详解）

### 知识点详情接口
- ✅ 返回完整的知识点信息
- ✅ 包含 `content`（Markdown）字段
- ✅ **第一次访问** `viewCount` 为 0 或 1
- ✅ **第二次访问** `viewCount` 增加了1

---

## ❌ 常见错误及解决

### 错误1: 404 Not Found

**原因**: 接口路径错误

**解决**:
- 检查URL是否正确
- 确认项目已启动
- 查看启动日志中的端口号

### 错误2: 500 Internal Server Error

**原因**: 数据库连接问题或SQL错误

**解决步骤**:

1. **检查数据库连接**
   ```bash
   # 登录MySQL
   mysql -u root -p
   
   # 检查数据库是否存在
   SHOW DATABASES LIKE 'ry-vue';
   
   # 使用数据库
   USE ry-vue;
   
   # 检查表是否存在
   SHOW TABLES LIKE 'knowledge%';
   ```

2. **检查表结构**
   ```sql
   DESC knowledge_subject;
   DESC knowledge_chapter;
   DESC knowledge_point;
   ```

3. **检查数据**
   ```sql
   SELECT COUNT(*) FROM knowledge_subject;
   SELECT COUNT(*) FROM knowledge_chapter;
   SELECT COUNT(*) FROM knowledge_point;
   ```

### 错误3: 返回空数组 []

**原因**: 数据库中没有数据

**解决**: 重新执行SQL脚本
```bash
mysql -u root -p ry-vue < sql/2025-11-28/1-知识点库系统表结构.sql
```

### 错误4: Mapper绑定错误

**错误信息**: `BindingException: Invalid bound statement`

**原因**: Mapper XML文件路径不对或namespace错误

**解决**:
1. 检查 `resources/mapper/system/` 目录下是否有XML文件
2. 检查XML文件中的 `namespace` 是否正确
3. 重新编译项目：`mvn clean compile`

---

## 📊 测试结果记录

### 接口测试清单

| 序号 | 接口名称 | URL | 状态 | 备注 |
|------|---------|-----|------|------|
| 1 | 科目列表 | `/student/knowledge/subjects` | ⬜ |  |
| 2 | 章节树 | `/student/knowledge/chapters/1` | ⬜ |  |
| 3 | 知识点列表 | `/student/knowledge/points` | ⬜ |  |
| 4 | 知识点详情 | `/student/knowledge/point/1` | ⬜ |  |
| 5 | 热门知识点 | `/student/knowledge/point/hot` | ⬜ |  |
| 6 | 最新知识点 | `/student/knowledge/point/latest` | ⬜ |  |
| 7 | 推荐知识点 | `/student/knowledge/point/recommend` | ⬜ |  |

**测试完成标准**: 7个接口全部返回正常数据 ✅

---

## 🎯 测试成功后的下一步

### 选项A：查看静态MVP页面
```bash
# 双击打开项目根目录下的文件
knowledge-library-mvp.html
```

### 选项B：继续完善功能
- 添加点赞功能
- 添加收藏功能
- 添加评论功能

### 选项C：开发前端页面
- 将静态HTML改造成Vue组件
- 调用真实的后端接口
- 实现完整的交互

---

## 💡 小技巧

### 快速查看接口返回数据

**使用浏览器插件**:
- 安装 `JSON Formatter` 插件
- 访问接口URL时，JSON会自动格式化

**使用在线JSON格式化工具**:
- 复制接口返回的JSON
- 粘贴到 https://jsonformatter.org/

### 批量测试接口

**创建Postman Collection**:
1. 在Postman中新建Collection
2. 添加所有7个接口
3. 点击 `Run Collection` 批量测试

---

## 📞 遇到问题？

1. **查看后台日志**: 90%的问题都能从日志中找到答案
2. **检查数据库**: 确保表和数据都存在
3. **重启项目**: 修改代码后记得重启
4. **清理缓存**: `mvn clean` 清理编译缓存

---

> **预计测试时间**: 5-10分钟  
> **测试目标**: 验证所有接口正常返回数据  
> **成功标志**: 7个接口全部✅
