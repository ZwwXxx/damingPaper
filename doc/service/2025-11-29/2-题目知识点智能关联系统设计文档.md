# 题目-知识点智能关联系统设计文档

## 一、需求背景

### 1.1 用户痛点
- 学生做错题后不知道该学习哪个知识点
- 需要手动搜索相关知识点，效率低下
- 无法快速定位薄弱知识点进行针对性学习

### 1.2 行业调研：大厂最佳实践

#### **力扣（LeetCode）**
- **标签体系**：每道题都有算法标签（如"动态规划"、"二叉树"）
- **关联推荐**：点击标签可查看同类题目和学习路径
- **优点**：标签化管理，便于分类和检索

#### **猿辅导/作业帮**
- **自动关联**：做错题后系统自动推送相关知识点讲解
- **知识图谱**：构建知识点依赖关系，推荐前置知识
- **一键跳转**：错题旁直接显示"去学习"按钮
- **优点**：无缝学习闭环，用户体验流畅

#### **洋葱学院**
- **视频讲解**：错题后推荐3-5分钟知识点短视频
- **练习推荐**：看完视频后推荐相似题目巩固
- **优点**：视频化学习，降低学习门槛

#### **学而思网校**
- **智能诊断**：根据答题情况生成知识点掌握度报告
- **薄弱点标记**：高亮显示掌握不佳的知识点
- **学习路径**：自动生成个性化学习计划
- **优点**：数据驱动，精准定位问题

### 1.3 设计目标
基于以上调研，我们的系统应该：
1. ✅ **轻量高效**：不增加用户负担，一键直达
2. ✅ **自动关联**：题目创建时可快速关联知识点
3. ✅ **智能推荐**：错题后自动推荐相关知识点
4. ✅ **无缝跳转**：考试回顾页面直接跳转学习

---

## 二、功能设计

### 2.1 核心功能

#### **功能1：题目关联知识点**
- 在题目创建/编辑页面添加"关联知识点"选择器
- 支持搜索和多选（一题可关联1-3个知识点）
- 可选输入关联原因（如"考察该知识点的应用"）

#### **功能2：考试回顾页知识点卡片**
- 每道题目下方显示关联的知识点标签
- 错题的知识点标签高亮显示（红色）
- 点击标签直接跳转到知识点详情页

#### **功能3：错题知识点统计**
- 考试回顾页顶部显示"薄弱知识点TOP3"
- 统计该试卷中错题关联的知识点频次
- 点击可跳转到知识点列表页，过滤该知识点相关内容

#### **功能4：知识点页面反向关联**
- 知识点详情页显示"相关题目"列表
- 展示关联该知识点的所有题目
- 支持按难度、题型筛选

### 2.2 页面交互设计

#### **考试回顾页面布局优化**
```
┌─────────────────────────────────────────────┐
│  试卷信息卡片                                  │
│  ┌──────────────────────────────────────┐   │
│  │  薄弱知识点分析                        │   │
│  │  🔴 指针操作 (3题错误)   [去巩固 →]    │   │
│  │  🟡 递归算法 (2题错误)   [去巩固 →]    │   │
│  │  🟢 数组遍历 (1题错误)   [去巩固 →]    │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘

题目1：指针的基本概念
  [A] 选项A   [B] 选项B ✓   [C] 选项C   [D] 选项D
  
  标准答案：B    你的答案：A ❌
  
  📚 关联知识点：
  ┌──────────────┐  ┌──────────────┐
  │  🔴 指针操作  │  │  🔴 内存管理  │  [点击学习 →]
  └──────────────┘  └──────────────┘
  
  💡 学习建议：建议先学习"指针基础"再复习此题
```

---

## 三、数据库设计

### 3.1 新增关联表
```sql
-- 题目-知识点关联表（多对多）
CREATE TABLE `question_knowledge_relation` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',
  `question_id` bigint(20) NOT NULL COMMENT '题目ID',
  `knowledge_point_id` bigint(20) NOT NULL COMMENT '知识点ID',
  `relation_type` tinyint(4) DEFAULT 1 COMMENT '关联类型：1-主要考点 2-次要考点',
  `reason` varchar(200) DEFAULT NULL COMMENT '关联原因',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `create_by` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_question_knowledge` (`question_id`, `knowledge_point_id`),
  KEY `idx_question_id` (`question_id`),
  KEY `idx_knowledge_id` (`knowledge_point_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='题目知识点关联表';
```

### 3.2 表结构说明
| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | bigint | 主键 |
| question_id | bigint | 题目ID |
| knowledge_point_id | bigint | 知识点ID |
| relation_type | tinyint | 1-主要考点 2-次要考点 |
| reason | varchar(200) | 关联原因（可选） |
| create_time | datetime | 创建时间 |
| create_by | varchar(64) | 创建人 |

---

## 四、接口设计

### 4.1 后端接口

#### **1. 题目关联知识点**
```java
POST /quiz/admin/question/relation/bind
Request:
{
  "questionId": 123,
  "knowledgePointIds": [1, 2, 3],
  "relationType": 1
}
Response:
{
  "code": 200,
  "msg": "关联成功"
}
```

#### **2. 获取题目关联的知识点**
```java
GET /quiz/student/question/{questionId}/knowledge-points
Response:
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "title": "指针操作",
      "difficulty": 2,
      "relationType": 1
    }
  ]
}
```

#### **3. 获取试卷薄弱知识点统计**
```java
GET /quiz/student/paper/answer/{paperAnswerId}/weak-points
Response:
{
  "code": 200,
  "data": {
    "weakPoints": [
      {
        "knowledgePointId": 1,
        "knowledgePointTitle": "指针操作",
        "wrongCount": 3,
        "totalCount": 5,
        "masteryRate": 0.4
      }
    ]
  }
}
```

#### **4. 知识点关联的题目列表**
```java
GET /student/knowledge/{pointId}/related-questions
Params: difficulty, questionType
Response:
{
  "code": 200,
  "data": {
    "total": 15,
    "questions": [...]
  }
}
```

---

## 五、实现步骤

### 阶段一：数据库 & 后端（1-2小时）
- [x] 创建关联表SQL
- [ ] 创建实体类 `QuestionKnowledgeRelation`
- [ ] Mapper & Service层
- [ ] Controller接口开发

### 阶段二：前端-题目管理（1小时）
- [ ] 题目编辑页添加知识点选择器
- [ ] 多选知识点组件
- [ ] 保存时提交关联关系

### 阶段三：前端-考试回顾页（2小时）
- [ ] 题目下方显示知识点标签
- [ ] 错题知识点高亮
- [ ] 薄弱知识点TOP3卡片
- [ ] 点击跳转知识点详情

### 阶段四：前端-知识点页（1小时）
- [ ] 知识点详情页添加"相关题目"模块
- [ ] 题目列表展示
- [ ] 筛选功能

---

## 六、效果预期

### 6.1 用户体验提升
- ⏱ **时间节省**：从"做错题→手动搜索知识点→学习"缩短为"做错题→点击标签→学习"，节省3-5分钟/题
- 🎯 **学习精准度**：系统推荐的知识点命中率>90%，避免学习无关内容
- 📈 **学习效率**：学习路径缩短50%，知识点复习效率提升

### 6.2 数据价值
- 构建题目-知识点关系图谱
- 统计知识点掌握度，生成学习报告
- 为后续智能推荐系统打下基础

---

## 七、技术栈

### 后端
- Spring Boot
- MyBatis
- MySQL

### 前端
- Vue 2
- Element UI
- Axios

---

## 八、风险与应对

### 风险1：知识点关联不准确
**应对**：
- 提供"报告错误"功能，用户可反馈关联不当
- 管理员定期审核关联关系

### 风险2：关联数据量大，查询慢
**应对**：
- 添加索引优化查询
- 使用Redis缓存高频知识点数据

### 风险3：用户不使用该功能
**应对**：
- 默认展示，无需额外操作
- 错题自动推荐，强引导

---

## 九、后续优化方向

1. **AI智能关联**：使用NLP自动分析题目内容，推荐关联知识点
2. **知识图谱**：构建知识点依赖关系，推荐前置知识
3. **个性化推荐**：根据用户历史答题记录，智能推荐薄弱知识点
4. **学习路径规划**：生成"从入门到精通"的知识点学习顺序

---

## 十、总结

本系统借鉴头部教育平台的成熟经验，通过**题目-知识点智能关联**，打通"练习-诊断-学习"闭环，实现：
- ✅ 降低学习门槛
- ✅ 提升学习效率
- ✅ 精准定位薄弱点
- ✅ 构建知识图谱

预计上线后，用户学习效率可提升**30%-50%**，平台活跃度提升**20%**。
